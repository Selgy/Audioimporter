"use strict";var exports = typeof exports === "undefined" ? {} : exports;;const w=typeof cep_node !== 'undefined'?cep_node.require(cep_node.global["__dir"+"name"] + "/assets/client-97072a1f.js"):require("../assets/client-97072a1f.js");var B={exports:{}},ie={},ue=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"},te={exports:{}};typeof Object.create=="function"?te.exports=function(r,n){r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:te.exports=function(r,n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r};var fe=te.exports;(function(e){var r=/%[sdj%]/g;e.format=function(t){if(!x(t)){for(var o=[],s=0;s<arguments.length;s++)o.push(f(arguments[s]));return o.join(" ")}for(var s=1,h=arguments,L=h.length,y=String(t).replace(r,function(S){if(S==="%%")return"%";if(s>=L)return S;switch(S){case"%s":return String(h[s++]);case"%d":return Number(h[s++]);case"%j":try{return JSON.stringify(h[s++])}catch{return"[Circular]"}default:return S}}),m=h[s];s<L;m=h[++s])W(m)||!a(m)?y+=" "+m:y+=" "+f(m);return y},e.deprecate=function(t,o){if(l(w.commonjsGlobal.process))return function(){return e.deprecate(t,o).apply(this,arguments)};if(process.noDeprecation===!0)return t;var s=!1;function h(){if(!s){if(process.throwDeprecation)throw new Error(o);process.traceDeprecation?console.trace(o):console.error(o),s=!0}return t.apply(this,arguments)}return h};var n={},i;e.debuglog=function(t){if(l(i)&&(i={}.NODE_DEBUG||""),t=t.toUpperCase(),!n[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var o=process.pid;n[t]=function(){var s=e.format.apply(e,arguments);console.error("%s %d: %s",t,o,s)}}else n[t]=function(){};return n[t]};function f(t,o){var s={seen:[],stylize:b};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),c(o)?s.showHidden=o:o&&e._extend(s,o),l(s.showHidden)&&(s.showHidden=!1),l(s.depth)&&(s.depth=2),l(s.colors)&&(s.colors=!1),l(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=g),P(s,t,s.depth)}e.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function g(t,o){var s=f.styles[o];return s?"\x1B["+f.colors[s][0]+"m"+t+"\x1B["+f.colors[s][1]+"m":t}function b(t,o){return t}function C(t){var o={};return t.forEach(function(s,h){o[s]=!0}),o}function P(t,o,s){if(t.customInspect&&o&&R(o.inspect)&&o.inspect!==e.inspect&&!(o.constructor&&o.constructor.prototype===o)){var h=o.inspect(s,t);return x(h)||(h=P(t,h,s)),h}var L=p(t,o);if(L)return L;var y=Object.keys(o),m=C(y);if(t.showHidden&&(y=Object.getOwnPropertyNames(o)),O(o)&&(y.indexOf("message")>=0||y.indexOf("description")>=0))return j(o);if(y.length===0){if(R(o)){var S=o.name?": "+o.name:"";return t.stylize("[Function"+S+"]","special")}if(u(o))return t.stylize(RegExp.prototype.toString.call(o),"regexp");if(v(o))return t.stylize(Date.prototype.toString.call(o),"date");if(O(o))return j(o)}var $="",F=!1,q=["{","}"];if(K(o)&&(F=!0,q=["[","]"]),R(o)){var le=o.name?": "+o.name:"";$=" [Function"+le+"]"}if(u(o)&&($=" "+RegExp.prototype.toString.call(o)),v(o)&&($=" "+Date.prototype.toUTCString.call(o)),O(o)&&($=" "+j(o)),y.length===0&&(!F||o.length==0))return q[0]+$+q[1];if(s<0)return u(o)?t.stylize(RegExp.prototype.toString.call(o),"regexp"):t.stylize("[Object]","special");t.seen.push(o);var re;return F?re=z(t,o,s,m,y):re=y.map(function(ae){return U(t,o,s,m,ae,F)}),t.seen.pop(),J(re,$,q)}function p(t,o){if(l(o))return t.stylize("undefined","undefined");if(x(o)){var s="'"+JSON.stringify(o).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(s,"string")}if(G(o))return t.stylize(""+o,"number");if(c(o))return t.stylize(""+o,"boolean");if(W(o))return t.stylize("null","null")}function j(t){return"["+Error.prototype.toString.call(t)+"]"}function z(t,o,s,h,L){for(var y=[],m=0,S=o.length;m<S;++m)oe(o,String(m))?y.push(U(t,o,s,h,String(m),!0)):y.push("");return L.forEach(function($){$.match(/^\d+$/)||y.push(U(t,o,s,h,$,!0))}),y}function U(t,o,s,h,L,y){var m,S,$;if($=Object.getOwnPropertyDescriptor(o,L)||{value:o[L]},$.get?$.set?S=t.stylize("[Getter/Setter]","special"):S=t.stylize("[Getter]","special"):$.set&&(S=t.stylize("[Setter]","special")),oe(h,L)||(m="["+L+"]"),S||(t.seen.indexOf($.value)<0?(W(s)?S=P(t,$.value,null):S=P(t,$.value,s-1),S.indexOf(`
`)>-1&&(y?S=S.split(`
`).map(function(F){return"  "+F}).join(`
`).substr(2):S=`
`+S.split(`
`).map(function(F){return"   "+F}).join(`
`))):S=t.stylize("[Circular]","special")),l(m)){if(y&&L.match(/^\d+$/))return S;m=JSON.stringify(""+L),m.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(m=m.substr(1,m.length-2),m=t.stylize(m,"name")):(m=m.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),m=t.stylize(m,"string"))}return m+": "+S}function J(t,o,s){var h=t.reduce(function(L,y){return y.indexOf(`
`)>=0,L+y.replace(/\u001b\[\d\d?m/g,"").length+1},0);return h>60?s[0]+(o===""?"":o+`
 `)+" "+t.join(`,
  `)+" "+s[1]:s[0]+o+" "+t.join(", ")+" "+s[1]}function K(t){return Array.isArray(t)}e.isArray=K;function c(t){return typeof t=="boolean"}e.isBoolean=c;function W(t){return t===null}e.isNull=W;function Y(t){return t==null}e.isNullOrUndefined=Y;function G(t){return typeof t=="number"}e.isNumber=G;function x(t){return typeof t=="string"}e.isString=x;function ee(t){return typeof t=="symbol"}e.isSymbol=ee;function l(t){return t===void 0}e.isUndefined=l;function u(t){return a(t)&&A(t)==="[object RegExp]"}e.isRegExp=u;function a(t){return typeof t=="object"&&t!==null}e.isObject=a;function v(t){return a(t)&&A(t)==="[object Date]"}e.isDate=v;function O(t){return a(t)&&(A(t)==="[object Error]"||t instanceof Error)}e.isError=O;function R(t){return typeof t=="function"}e.isFunction=R;function d(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}e.isPrimitive=d,e.isBuffer=ue;function A(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var t=new Date,o=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],o].join(" ")}e.log=function(){console.log("%s - %s",k(),e.format.apply(e,arguments))},e.inherits=fe,e._extend=function(t,o){if(!o||!a(o))return t;for(var s=Object.keys(o),h=s.length;h--;)t[s[h]]=o[s[h]];return t};function oe(t,o){return Object.prototype.hasOwnProperty.call(t,o)}})(ie);var pe=process.platform==="win32",N=ie;function Z(e,r){for(var n=[],i=0;i<e.length;i++){var f=e[i];!f||f==="."||(f===".."?n.length&&n[n.length-1]!==".."?n.pop():r&&n.push(".."):n.push(f))}return n}function M(e){for(var r=e.length-1,n=0;n<=r&&!e[n];n++);for(var i=r;i>=0&&!e[i];i--);return n===0&&i===r?e:n>i?[]:e.slice(n,i+1)}var se=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,de=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,E={};function Q(e){var r=se.exec(e),n=(r[1]||"")+(r[2]||""),i=r[3]||"",f=de.exec(i),g=f[1],b=f[2],C=f[3];return[n,g,b,C]}function ne(e){var r=se.exec(e),n=r[1]||"",i=!!n&&n[1]!==":";return{device:n,isUnc:i,isAbsolute:i||!!r[2],tail:r[3]}}function ce(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}E.resolve=function(){for(var e="",r="",n=!1,i=arguments.length-1;i>=-1;i--){var f;if(i>=0?f=arguments[i]:e?(f=process.env["="+e],(!f||f.substr(0,3).toLowerCase()!==e.toLowerCase()+"\\")&&(f=e+"\\")):f=process.cwd(),N.isString(f)){if(!f)continue}else throw new TypeError("Arguments to path.resolve must be strings");var g=ne(f),b=g.device,C=g.isUnc,P=g.isAbsolute,p=g.tail;if(!(b&&e&&b.toLowerCase()!==e.toLowerCase())&&(e||(e=b),n||(r=p+"\\"+r,n=P),e&&n))break}return C&&(e=ce(e)),r=Z(r.split(/[\\\/]+/),!n).join("\\"),e+(n?"\\":"")+r||"."};E.normalize=function(e){var r=ne(e),n=r.device,i=r.isUnc,f=r.isAbsolute,g=r.tail,b=/[\\\/]$/.test(g);return g=Z(g.split(/[\\\/]+/),!f).join("\\"),!g&&!f&&(g="."),g&&b&&(g+="\\"),i&&(n=ce(n)),n+(f?"\\":"")+g};E.isAbsolute=function(e){return ne(e).isAbsolute};E.join=function(){for(var e=[],r=0;r<arguments.length;r++){var n=arguments[r];if(!N.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&e.push(n)}var i=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(i=i.replace(/^[\\\/]{2,}/,"\\")),E.normalize(i)};E.relative=function(e,r){e=E.resolve(e),r=E.resolve(r);for(var n=e.toLowerCase(),i=r.toLowerCase(),f=M(r.split("\\")),g=M(n.split("\\")),b=M(i.split("\\")),C=Math.min(g.length,b.length),P=C,p=0;p<C;p++)if(g[p]!==b[p]){P=p;break}if(P==0)return r;for(var j=[],p=P;p<g.length;p++)j.push("..");return j=j.concat(f.slice(P)),j.join("\\")};E._makeLong=function(e){if(!N.isString(e))return e;if(!e)return"";var r=E.resolve(e);return/^[a-zA-Z]\:\\/.test(r)?"\\\\?\\"+r:/^\\\\[^?.]/.test(r)?"\\\\?\\UNC\\"+r.substring(2):e};E.dirname=function(e){var r=Q(e),n=r[0],i=r[1];return!n&&!i?".":(i&&(i=i.substr(0,i.length-1)),n+i)};E.basename=function(e,r){var n=Q(e)[2];return r&&n.substr(-1*r.length)===r&&(n=n.substr(0,n.length-r.length)),n};E.extname=function(e){return Q(e)[3]};E.format=function(e){if(!N.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var r=e.root||"";if(!N.isString(r))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,i=e.base||"";return n?n[n.length-1]===E.sep?n+i:n+E.sep+i:i};E.parse=function(e){if(!N.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var r=Q(e);if(!r||r.length!==4)throw new TypeError("Invalid path '"+e+"'");return{root:r[0],dir:r[0]+r[1].slice(0,-1),base:r[2],ext:r[3],name:r[2].slice(0,r[2].length-r[3].length)}};E.sep="\\";E.delimiter=";";var ge=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,_={};function V(e){return ge.exec(e).slice(1)}_.resolve=function(){for(var e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var i=n>=0?arguments[n]:process.cwd();if(N.isString(i)){if(!i)continue}else throw new TypeError("Arguments to path.resolve must be strings");e=i+"/"+e,r=i[0]==="/"}return e=Z(e.split("/"),!r).join("/"),(r?"/":"")+e||"."};_.normalize=function(e){var r=_.isAbsolute(e),n=e&&e[e.length-1]==="/";return e=Z(e.split("/"),!r).join("/"),!e&&!r&&(e="."),e&&n&&(e+="/"),(r?"/":"")+e};_.isAbsolute=function(e){return e.charAt(0)==="/"};_.join=function(){for(var e="",r=0;r<arguments.length;r++){var n=arguments[r];if(!N.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(e?e+="/"+n:e+=n)}return _.normalize(e)};_.relative=function(e,r){e=_.resolve(e).substr(1),r=_.resolve(r).substr(1);for(var n=M(e.split("/")),i=M(r.split("/")),f=Math.min(n.length,i.length),g=f,b=0;b<f;b++)if(n[b]!==i[b]){g=b;break}for(var C=[],b=g;b<n.length;b++)C.push("..");return C=C.concat(i.slice(g)),C.join("/")};_._makeLong=function(e){return e};_.dirname=function(e){var r=V(e),n=r[0],i=r[1];return!n&&!i?".":(i&&(i=i.substr(0,i.length-1)),n+i)};_.basename=function(e,r){var n=V(e)[2];return r&&n.substr(-1*r.length)===r&&(n=n.substr(0,n.length-r.length)),n};_.extname=function(e){return V(e)[3]};_.format=function(e){if(!N.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var r=e.root||"";if(!N.isString(r))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir?e.dir+_.sep:"",i=e.base||"";return n+i};_.parse=function(e){if(!N.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var r=V(e);if(!r||r.length!==4)throw new TypeError("Invalid path '"+e+"'");return r[1]=r[1]||"",r[2]=r[2]||"",r[3]=r[3]||"",{root:r[0],dir:r[0]+r[1].slice(0,-1),base:r[2],ext:r[3],name:r[2].slice(0,r[2].length-r[3].length)}};_.sep="/";_.delimiter=":";pe?B.exports=E:B.exports=_;B.exports.posix=_;B.exports.win32=E;var me=B.exports;const he=w.getDefaultExportFromCjs(me),be=()=>{const[e,r]=w.reactExports.useState({currentProfile:"",lastSelectedProfile:"",profiles:{}}),[n,i]=w.reactExports.useState([]),[f,g]=w.reactExports.useState(null),[b,C]=w.reactExports.useState(!1),P=w.reactExports.useRef([]).current,p=w.reactExports.useRef(null),j=w.reactExports.useRef({currentProfile:"",lastSelectedProfile:"",profiles:{}});w.reactExports.useEffect(()=>(console.log("useEffect hook is running"),setTimeout(()=>{z()},2e3),()=>{p.current&&p.current.close()}),[]),w.reactExports.useEffect(()=>{p.current&&(p.current.onmessage=l=>{const u=l.data;if(c(`Received message: ${u}`),typeof u=="string"){if(u.startsWith("CONFIG:")){const a=JSON.parse(u.replace("CONFIG:",""));r(a),j.current=a,c("Config loaded successfully from server"),c(`Updated config: ${JSON.stringify(a,null,2)}`)}else if(u.startsWith("COMBO:")){const a=u.replace("COMBO:","");c(`Combo received: ${a}`),x(a).catch(v=>{c(`Error in handleCombo: ${v}`)})}else if(u.startsWith("LAST_SELECTED_PROFILE:")){const a=u.replace("LAST_SELECTED_PROFILE:","");g(a),c(`Last selected profile set to: ${a}`)}}})},[]),w.reactExports.useEffect(()=>{const l=setInterval(W,5e3);return()=>clearInterval(l)},[]);const z=w.reactExports.useCallback(()=>{if(console.log("Attempting to establish WebSocket connection..."),p.current&&p.current.readyState===WebSocket.OPEN){console.log("WebSocket is already connected");return}try{p.current=new WebSocket("ws://localhost:7878"),console.log("WebSocket connection object created"),p.current.onopen=()=>{for(console.log("WebSocket connected to Rust server"),c("Connected to Rust server"),C(!0),K();P.length>0;){const l=P.shift();l&&p.current&&p.current.send(l)}},p.current.onmessage=l=>{const u=l.data;if(c(`Received message: ${u}`),typeof u=="string"){if(u.startsWith("CONFIG:")){const a=JSON.parse(u.replace("CONFIG:",""));r(a),j.current=a,c("Config loaded successfully from server"),c(`Updated config: ${JSON.stringify(a,null,2)}`)}else if(u.startsWith("COMBO:")){const a=u.replace("COMBO:","");c(`Combo received: ${a}`),x(a).catch(v=>{c(`Error in handleCombo: ${v}`)})}else if(u.startsWith("LAST_SELECTED_PROFILE:")){const a=u.replace("LAST_SELECTED_PROFILE:","");g(a),c(`Last selected profile set to: ${a}`)}}},p.current.onerror=l=>{console.error("WebSocket error encountered:",l),c(`WebSocket error: ${l instanceof ErrorEvent?l.message:"Unknown error"}`),C(!1)},p.current.onclose=l=>{console.log(`WebSocket closed: ${l.reason}`),c(`WebSocket closed: ${l.reason}`),C(!1),U()}}catch(l){console.error("WebSocket connection failed:",l),c("WebSocket connection failed: "+l.message),C(!1),U()}},[]),U=w.reactExports.useCallback(()=>{console.log("Attempting to reconnect..."),c("Attempting to reconnect..."),setTimeout(()=>{z()},5e3)},[z]),J=w.reactExports.useCallback(l=>{b&&p.current?(p.current.send(l),c(`Sent message: ${l}`)):(P.push(l),c(`Message queued: ${l}`))},[b]),K=w.reactExports.useCallback(()=>{c("loadConfig called"),J("LOAD_CONFIG"),J("GET_LAST_SELECTED_PROFILE")},[J]),c=l=>{console.log("Debug log:",l),i(u=>[...u,l])},W=()=>{var l;((l=p.current)==null?void 0:l.readyState)===WebSocket.CLOSED&&(c("WebSocket disconnected. Attempting to reconnect..."),z())},Y=()=>new Promise((l,u)=>{if(p.current&&p.current.readyState===WebSocket.OPEN){let a=null,v=null;const O=R=>{var A;const d=R.data;typeof d=="string"&&(d.startsWith("CONFIG:")?(a=JSON.parse(d.replace("CONFIG:","")),c(`Received CONFIG: ${JSON.stringify(a,null,2)}`)):d.startsWith("LAST_SELECTED_PROFILE:")&&(v=d.replace("LAST_SELECTED_PROFILE:","").trim(),c(`Received LAST_SELECTED_PROFILE: ${v}`)),a!==null&&v!==null&&((A=p.current)==null||A.removeEventListener("message",O),j.current=a,r(a),g(v),l([a,v])))};p.current.addEventListener("message",O),p.current.send("LOAD_CONFIG"),c("Sent LOAD_CONFIG message"),p.current.send("GET_LAST_SELECTED_PROFILE"),c("Sent GET_LAST_SELECTED_PROFILE message"),setTimeout(()=>{var R;(R=p.current)==null||R.removeEventListener("message",O),c("Timeout while fetching config and profile"),c(`Config received: ${a!==null}`),c(`Last profile received: ${v!==null}`),u(new Error("Timeout while fetching config and profile"))},5e3)}else u(new Error("WebSocket is not connected"))}),G=l=>{const u={lalt:"alt",ralt:"alt",lcontrol:"ctrl",rcontrol:"ctrl",controlleft:"ctrl",controlright:"ctrl",shiftleft:"shift",shiftright:"shift",metaleft:navigator.platform.toUpperCase().indexOf("MAC")>=0?"cmd":"win",metaright:navigator.platform.toUpperCase().indexOf("MAC")>=0?"cmd":"win",numpad1:"1",numpad2:"2",numpad3:"3",numpad4:"4",numpad5:"5",numpad6:"6",numpad7:"7",numpad8:"8",numpad9:"9",numpad0:"0"},v=navigator.platform.toUpperCase().indexOf("MAC")>=0?["cmd","ctrl","alt","shift"]:["ctrl","alt","shift","win"];return l.toLowerCase().split("+").map(d=>u[d]||d).filter((d,A,T)=>T.indexOf(d)===A).sort((d,A)=>{const T=v.indexOf(d),I=v.indexOf(A);return T===-1&&I===-1?d.localeCompare(A):T===-1?1:I===-1?-1:T-I}).map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join("+")},x=async l=>{c(`Handling combo: ${l}`);let u,a;try{[u,a]=await Y(),c(`Fetched latest config: ${JSON.stringify(u,null,2)}`),c(`Current profile: ${a}`)}catch(d){c(`Error fetching latest config: ${d}. Using current state.`),u=j.current,a=f,c(`Using config: ${JSON.stringify(u,null,2)}`),c(`Using profile: ${a}`)}if(!a){c("No profile selected, skipping combo execution");return}if(!u.profiles||!u.profiles[a]){c(`Selected profile ${a} not found in config, skipping combo execution`);return}const v=u.profiles[a];if(Object.keys(v).length===0){c(`Config for profile ${a} is empty, no bindings to process`);return}const O=G(l);c(`Normalized combo: ${O}`);const R=Object.fromEntries(Object.entries(v).map(([d,A])=>[G(d),A]));if(c(`Normalized config for profile ${a}: ${JSON.stringify(R,null,2)}`),R[O]){const d=R[O];c(`Found binding for combo: ${O}`),d.path?(c(`Executing script for path: ${d.path}, track: ${d.track}, volume: ${d.volume}dB, and pitch: ${d.pitch} semitones`),ee(d.path,parseInt(d.track.replace("A",""),10),d.volume,d.pitch||0)):c(`No path specified for combo: ${O}`)}else c(`Combo ${O} not found in config for profile ${a}. Skipping execution.`)},ee=(l,u,a,v)=>{c(`Executing script with parameters: filePath=${l}, track=${u}, volume=${a}, pitch=${v}`);const O="./jsx/importAudio.jsx",R=he.resolve(__dirname,O),d=process.platform==="win32"?R.replace(/\\/g,"\\\\"):R,A=process.platform==="win32"?l.replace(/\\/g,"\\\\"):l,T=`
            try {
                var jsxFile = new File("${d}");
                if (jsxFile.exists) {
                    $.evalFile(jsxFile);
                    var result = importAudioToTrack("${A}", ${u}, ${a}, ${v}, true);
                    result; // Return the result from the function
                } else {
                    throw new Error("JSX file not found at: " + jsxFile.fsName);
                }
            } catch(e) {
                // Return the error as a JSON string
                JSON.stringify({
                    success: false,
                    message: e.toString(),
                    debugLog: "Error occurred while executing JSX script."
                });
            }
        `;c(`Evaluating script:
${T}`),window.__adobe_cep__&&window.__adobe_cep__.evalScript?window.__adobe_cep__.evalScript(T,I=>{c(`Script execution result: ${I}`);try{const k=JSON.parse(I);k.success?c(`JSX script executed successfully: ${k.message}`):c(`Error in JSX script: ${k.message}`),c(`Debug Log:
${k.debugLog}`)}catch(k){c(`Failed to parse result from JSX script: ${k}`),c(`Raw result: ${I}`)}}):c("window.__adobe_cep__.evalScript is not available")};return null};w.client.createRoot(document.getElementById("root")).render(w.jsx(w.React.StrictMode,{children:w.jsx(be,{})}));const{spawn:ve}=require("child_process"),X=require("path"),ye=require("fs");let D=null;function Se(){if(console.log("Starting Rust server..."),typeof process<"u"&&process.versions!=null&&process.versions.node!=null){console.log("Node.js environment detected. Node version:",process.version);const e=Ee();console.log("Extension root path:",e);let r;if(process.platform==="win32")r=decodeURIComponent(e.replace(/^file:[/\\]*/,""));else if(process.platform==="darwin")r="/"+decodeURIComponent(e.replace(/^file:\/\//,""));else{console.error(`Unsupported platform: ${process.platform}`);return}console.log("Decoded Extension Root Path:",r);let n;if(process.platform==="win32")n=X.join(r,"target","release","audio_importer.exe");else if(process.platform==="darwin")n=X.join(r,"target","release","audio_importer");else{console.error(`Unsupported platform: ${process.platform}`);return}if(n=X.normalize(n),console.log("Corrected Rust executable path:",n),!ye.existsSync(n)){console.error(`Rust executable not found at ${n}`);return}D=ve(n,[],{cwd:X.dirname(n),env:{...process.env,RUST_BACKTRACE:"1"},stdio:["inherit","pipe","pipe"],detached:!1}),D.stdout.on("data",i=>{console.log(`Rust server stdout: ${i}`)}),D.stderr.on("data",i=>{console.error(`Rust server stderr: ${i}`)}),D.on("error",i=>{console.error(`Failed to start Rust server: ${i}`)}),D.on("close",i=>{i!==0?console.error(`Rust server process exited with code ${i}`):console.log("Rust server process exited successfully"),D=null})}else console.error("This script should only be run in a Node.js environment.")}function H(){D&&(console.log("Stopping Rust server..."),D.kill())}function Ee(){return typeof window<"u"&&window.__adobe_cep__?window.__adobe_cep__.getSystemPath("extension"):process.cwd()}console.log("Background script loaded. Starting Rust server...");Se();process.on("exit",H);process.on("SIGINT",H);process.on("SIGTERM",H);process.platform==="win32"&&process.on("SIGBREAK",H);typeof window<"u"&&window.__adobe_cep__&&window.__adobe_cep__.addEventListener("com.adobe.csxs.events.ApplicationBeforeQuit",H);
//# sourceMappingURL=settings-735099da.js.map
