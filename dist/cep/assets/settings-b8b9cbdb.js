"use strict";var exports = typeof exports === "undefined" ? {} : exports;;const L=typeof cep_node !== 'undefined'?cep_node.require(cep_node.global["__dir"+"name"] + "/assets/client-97072a1f.js"):require("../assets/client-97072a1f.js");var W={exports:{}},ne={},ue=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"},ee={exports:{}};typeof Object.create=="function"?ee.exports=function(r,n){r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:ee.exports=function(r,n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r};var fe=ee.exports;(function(e){var r=/%[sdj%]/g;e.format=function(t){if(!l(t)){for(var o=[],s=0;s<arguments.length;s++)o.push(u(arguments[s]));return o.join(" ")}for(var s=1,m=arguments,$=m.length,v=String(t).replace(r,function(y){if(y==="%%")return"%";if(s>=$)return y;switch(y){case"%s":return String(m[s++]);case"%d":return Number(m[s++]);case"%j":try{return JSON.stringify(m[s++])}catch{return"[Circular]"}default:return y}}),d=m[s];s<$;d=m[++s])I(d)||!a(d)?v+=" "+d:v+=" "+u(d);return v},e.deprecate=function(t,o){if(b(L.commonjsGlobal.process))return function(){return e.deprecate(t,o).apply(this,arguments)};if(process.noDeprecation===!0)return t;var s=!1;function m(){if(!s){if(process.throwDeprecation)throw new Error(o);process.traceDeprecation?console.trace(o):console.error(o),s=!0}return t.apply(this,arguments)}return m};var n={},i;e.debuglog=function(t){if(b(i)&&(i={}.NODE_DEBUG||""),t=t.toUpperCase(),!n[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var o=process.pid;n[t]=function(){var s=e.format.apply(e,arguments);console.error("%s %d: %s",t,o,s)}}else n[t]=function(){};return n[t]};function u(t,o){var s={seen:[],stylize:h};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),x(o)?s.showHidden=o:o&&e._extend(s,o),b(s.showHidden)&&(s.showHidden=!1),b(s.depth)&&(s.depth=2),b(s.colors)&&(s.colors=!1),b(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=g),P(s,t,s.depth)}e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function g(t,o){var s=u.styles[o];return s?"\x1B["+u.colors[s][0]+"m"+t+"\x1B["+u.colors[s][1]+"m":t}function h(t,o){return t}function C(t){var o={};return t.forEach(function(s,m){o[s]=!0}),o}function P(t,o,s){if(t.customInspect&&o&&j(o.inspect)&&o.inspect!==e.inspect&&!(o.constructor&&o.constructor.prototype===o)){var m=o.inspect(s,t);return l(m)||(m=P(t,m,s)),m}var $=c(t,o);if($)return $;var v=Object.keys(o),d=C(v);if(t.showHidden&&(v=Object.getOwnPropertyNames(o)),A(o)&&(v.indexOf("message")>=0||v.indexOf("description")>=0))return N(o);if(v.length===0){if(j(o)){var y=o.name?": "+o.name:"";return t.stylize("[Function"+y+"]","special")}if(O(o))return t.stylize(RegExp.prototype.toString.call(o),"regexp");if(R(o))return t.stylize(Date.prototype.toString.call(o),"date");if(A(o))return N(o)}var _="",D=!1,B=["{","}"];if(M(o)&&(D=!0,B=["[","]"]),j(o)){var le=o.name?": "+o.name:"";_=" [Function"+le+"]"}if(O(o)&&(_=" "+RegExp.prototype.toString.call(o)),R(o)&&(_=" "+Date.prototype.toUTCString.call(o)),A(o)&&(_=" "+N(o)),v.length===0&&(!D||o.length==0))return B[0]+_+B[1];if(s<0)return O(o)?t.stylize(RegExp.prototype.toString.call(o),"regexp"):t.stylize("[Object]","special");t.seen.push(o);var Y;return D?Y=Z(t,o,s,d,v):Y=v.map(function(ae){return z(t,o,s,d,ae,D)}),t.seen.pop(),G(Y,_,B)}function c(t,o){if(b(o))return t.stylize("undefined","undefined");if(l(o)){var s="'"+JSON.stringify(o).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(s,"string")}if(p(o))return t.stylize(""+o,"number");if(x(o))return t.stylize(""+o,"boolean");if(I(o))return t.stylize("null","null")}function N(t){return"["+Error.prototype.toString.call(t)+"]"}function Z(t,o,s,m,$){for(var v=[],d=0,y=o.length;d<y;++d)te(o,String(d))?v.push(z(t,o,s,m,String(d),!0)):v.push("");return $.forEach(function(_){_.match(/^\d+$/)||v.push(z(t,o,s,m,_,!0))}),v}function z(t,o,s,m,$,v){var d,y,_;if(_=Object.getOwnPropertyDescriptor(o,$)||{value:o[$]},_.get?_.set?y=t.stylize("[Getter/Setter]","special"):y=t.stylize("[Getter]","special"):_.set&&(y=t.stylize("[Setter]","special")),te(m,$)||(d="["+$+"]"),y||(t.seen.indexOf(_.value)<0?(I(s)?y=P(t,_.value,null):y=P(t,_.value,s-1),y.indexOf(`
`)>-1&&(v?y=y.split(`
`).map(function(D){return"  "+D}).join(`
`).substr(2):y=`
`+y.split(`
`).map(function(D){return"   "+D}).join(`
`))):y=t.stylize("[Circular]","special")),b(d)){if(v&&$.match(/^\d+$/))return y;d=JSON.stringify(""+$),d.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(d=d.substr(1,d.length-2),d=t.stylize(d,"name")):(d=d.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),d=t.stylize(d,"string"))}return d+": "+y}function G(t,o,s){var m=t.reduce(function($,v){return v.indexOf(`
`)>=0,$+v.replace(/\u001b\[\d\d?m/g,"").length+1},0);return m>60?s[0]+(o===""?"":o+`
 `)+" "+t.join(`,
  `)+" "+s[1]:s[0]+o+" "+t.join(", ")+" "+s[1]}function M(t){return Array.isArray(t)}e.isArray=M;function x(t){return typeof t=="boolean"}e.isBoolean=x;function I(t){return t===null}e.isNull=I;function f(t){return t==null}e.isNullOrUndefined=f;function p(t){return typeof t=="number"}e.isNumber=p;function l(t){return typeof t=="string"}e.isString=l;function E(t){return typeof t=="symbol"}e.isSymbol=E;function b(t){return t===void 0}e.isUndefined=b;function O(t){return a(t)&&Q(t)==="[object RegExp]"}e.isRegExp=O;function a(t){return typeof t=="object"&&t!==null}e.isObject=a;function R(t){return a(t)&&Q(t)==="[object Date]"}e.isDate=R;function A(t){return a(t)&&(Q(t)==="[object Error]"||t instanceof Error)}e.isError=A;function j(t){return typeof t=="function"}e.isFunction=j;function k(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}e.isPrimitive=k,e.isBuffer=ue;function Q(t){return Object.prototype.toString.call(t)}function V(t){return t<10?"0"+t.toString(10):t.toString(10)}var se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ce(){var t=new Date,o=[V(t.getHours()),V(t.getMinutes()),V(t.getSeconds())].join(":");return[t.getDate(),se[t.getMonth()],o].join(" ")}e.log=function(){console.log("%s - %s",ce(),e.format.apply(e,arguments))},e.inherits=fe,e._extend=function(t,o){if(!o||!a(o))return t;for(var s=Object.keys(o),m=s.length;m--;)t[s[m]]=o[s[m]];return t};function te(t,o){return Object.prototype.hasOwnProperty.call(t,o)}})(ne);var pe=process.platform==="win32",T=ne;function K(e,r){for(var n=[],i=0;i<e.length;i++){var u=e[i];!u||u==="."||(u===".."?n.length&&n[n.length-1]!==".."?n.pop():r&&n.push(".."):n.push(u))}return n}function U(e){for(var r=e.length-1,n=0;n<=r&&!e[n];n++);for(var i=r;i>=0&&!e[i];i--);return n===0&&i===r?e:n>i?[]:e.slice(n,i+1)}var oe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,de=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,S={};function X(e){var r=oe.exec(e),n=(r[1]||"")+(r[2]||""),i=r[3]||"",u=de.exec(i),g=u[1],h=u[2],C=u[3];return[n,g,h,C]}function re(e){var r=oe.exec(e),n=r[1]||"",i=!!n&&n[1]!==":";return{device:n,isUnc:i,isAbsolute:i||!!r[2],tail:r[3]}}function ie(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}S.resolve=function(){for(var e="",r="",n=!1,i=arguments.length-1;i>=-1;i--){var u;if(i>=0?u=arguments[i]:e?(u=process.env["="+e],(!u||u.substr(0,3).toLowerCase()!==e.toLowerCase()+"\\")&&(u=e+"\\")):u=process.cwd(),T.isString(u)){if(!u)continue}else throw new TypeError("Arguments to path.resolve must be strings");var g=re(u),h=g.device,C=g.isUnc,P=g.isAbsolute,c=g.tail;if(!(h&&e&&h.toLowerCase()!==e.toLowerCase())&&(e||(e=h),n||(r=c+"\\"+r,n=P),e&&n))break}return C&&(e=ie(e)),r=K(r.split(/[\\\/]+/),!n).join("\\"),e+(n?"\\":"")+r||"."};S.normalize=function(e){var r=re(e),n=r.device,i=r.isUnc,u=r.isAbsolute,g=r.tail,h=/[\\\/]$/.test(g);return g=K(g.split(/[\\\/]+/),!u).join("\\"),!g&&!u&&(g="."),g&&h&&(g+="\\"),i&&(n=ie(n)),n+(u?"\\":"")+g};S.isAbsolute=function(e){return re(e).isAbsolute};S.join=function(){for(var e=[],r=0;r<arguments.length;r++){var n=arguments[r];if(!T.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&e.push(n)}var i=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(i=i.replace(/^[\\\/]{2,}/,"\\")),S.normalize(i)};S.relative=function(e,r){e=S.resolve(e),r=S.resolve(r);for(var n=e.toLowerCase(),i=r.toLowerCase(),u=U(r.split("\\")),g=U(n.split("\\")),h=U(i.split("\\")),C=Math.min(g.length,h.length),P=C,c=0;c<C;c++)if(g[c]!==h[c]){P=c;break}if(P==0)return r;for(var N=[],c=P;c<g.length;c++)N.push("..");return N=N.concat(u.slice(P)),N.join("\\")};S._makeLong=function(e){if(!T.isString(e))return e;if(!e)return"";var r=S.resolve(e);return/^[a-zA-Z]\:\\/.test(r)?"\\\\?\\"+r:/^\\\\[^?.]/.test(r)?"\\\\?\\UNC\\"+r.substring(2):e};S.dirname=function(e){var r=X(e),n=r[0],i=r[1];return!n&&!i?".":(i&&(i=i.substr(0,i.length-1)),n+i)};S.basename=function(e,r){var n=X(e)[2];return r&&n.substr(-1*r.length)===r&&(n=n.substr(0,n.length-r.length)),n};S.extname=function(e){return X(e)[3]};S.format=function(e){if(!T.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var r=e.root||"";if(!T.isString(r))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,i=e.base||"";return n?n[n.length-1]===S.sep?n+i:n+S.sep+i:i};S.parse=function(e){if(!T.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var r=X(e);if(!r||r.length!==4)throw new TypeError("Invalid path '"+e+"'");return{root:r[0],dir:r[0]+r[1].slice(0,-1),base:r[2],ext:r[3],name:r[2].slice(0,r[2].length-r[3].length)}};S.sep="\\";S.delimiter=";";var ge=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,w={};function q(e){return ge.exec(e).slice(1)}w.resolve=function(){for(var e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var i=n>=0?arguments[n]:process.cwd();if(T.isString(i)){if(!i)continue}else throw new TypeError("Arguments to path.resolve must be strings");e=i+"/"+e,r=i[0]==="/"}return e=K(e.split("/"),!r).join("/"),(r?"/":"")+e||"."};w.normalize=function(e){var r=w.isAbsolute(e),n=e&&e[e.length-1]==="/";return e=K(e.split("/"),!r).join("/"),!e&&!r&&(e="."),e&&n&&(e+="/"),(r?"/":"")+e};w.isAbsolute=function(e){return e.charAt(0)==="/"};w.join=function(){for(var e="",r=0;r<arguments.length;r++){var n=arguments[r];if(!T.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(e?e+="/"+n:e+=n)}return w.normalize(e)};w.relative=function(e,r){e=w.resolve(e).substr(1),r=w.resolve(r).substr(1);for(var n=U(e.split("/")),i=U(r.split("/")),u=Math.min(n.length,i.length),g=u,h=0;h<u;h++)if(n[h]!==i[h]){g=h;break}for(var C=[],h=g;h<n.length;h++)C.push("..");return C=C.concat(i.slice(g)),C.join("/")};w._makeLong=function(e){return e};w.dirname=function(e){var r=q(e),n=r[0],i=r[1];return!n&&!i?".":(i&&(i=i.substr(0,i.length-1)),n+i)};w.basename=function(e,r){var n=q(e)[2];return r&&n.substr(-1*r.length)===r&&(n=n.substr(0,n.length-r.length)),n};w.extname=function(e){return q(e)[3]};w.format=function(e){if(!T.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var r=e.root||"";if(!T.isString(r))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir?e.dir+w.sep:"",i=e.base||"";return n+i};w.parse=function(e){if(!T.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var r=q(e);if(!r||r.length!==4)throw new TypeError("Invalid path '"+e+"'");return r[1]=r[1]||"",r[2]=r[2]||"",r[3]=r[3]||"",{root:r[0],dir:r[0]+r[1].slice(0,-1),base:r[2],ext:r[3],name:r[2].slice(0,r[2].length-r[3].length)}};w.sep="/";w.delimiter=":";pe?W.exports=S:W.exports=w;W.exports.posix=w;W.exports.win32=S;var me=W.exports;const he=L.getDefaultExportFromCjs(me),be=()=>{const e=L.reactExports.useRef(null),r=L.reactExports.useRef({currentProfile:"",lastSelectedProfile:"",profiles:{}}),[n,i]=L.reactExports.useState({currentProfile:"",lastSelectedProfile:"",profiles:{}}),[u,g]=L.reactExports.useState([]),[h,C]=L.reactExports.useState(null);L.reactExports.useEffect(()=>(console.log("useEffect hook is running"),P(),()=>{e.current&&e.current.close()}),[]),L.reactExports.useEffect(()=>{e.current&&(e.current.onmessage=f=>{const p=f.data;if(c(`Received message: ${p}`),typeof p=="string"){if(p.startsWith("CONFIG:")){const l=JSON.parse(p.replace("CONFIG:",""));i(l),r.current=l,c("Config loaded successfully from server"),c(`Updated config: ${JSON.stringify(l,null,2)}`)}else if(p.startsWith("COMBO:")){const l=p.replace("COMBO:","");c(`Combo received: ${l}`),M(l).catch(E=>{c(`Error in handleCombo: ${E}`)})}else if(p.startsWith("LAST_SELECTED_PROFILE:")){const l=p.replace("LAST_SELECTED_PROFILE:","");C(l),c(`Last selected profile set to: ${l}`)}}})},[]),L.reactExports.useEffect(()=>{const f=setInterval(Z,5e3);return()=>clearInterval(f)},[]);const P=L.reactExports.useCallback(()=>{if(console.log("Attempting to establish WebSocket connection..."),e.current&&e.current.readyState===WebSocket.OPEN){console.log("WebSocket is already connected");return}try{e.current=new WebSocket("ws://localhost:7878"),console.log("WebSocket connection object created"),e.current.onopen=()=>{console.log("WebSocket connected to Rust server"),c("Connected to Rust server"),N()},e.current.onerror=f=>{console.error("WebSocket error encountered:",f),c(`WebSocket error: ${f instanceof ErrorEvent?f.message:"Unknown error"}`)},e.current.onclose=f=>{console.log(`WebSocket closed: ${f.reason}`),c(`WebSocket closed: ${f.reason}`),setTimeout(P,5e3)}}catch(f){console.error("WebSocket connection failed:",f),c("WebSocket connection failed: "+f.message)}},[]),c=f=>{console.log("Debug log:",f),g(p=>[...p,f])},N=()=>{var f,p;c("loadConfig called");try{(f=e.current)==null||f.send("LOAD_CONFIG"),c("Sent LOAD_CONFIG message"),(p=e.current)==null||p.send("GET_LAST_SELECTED_PROFILE"),c("Sent GET_LAST_SELECTED_PROFILE message")}catch(l){console.error("Error loading config:",l),I(`Error loading config: ${l}`)}},Z=()=>{var f;((f=e.current)==null?void 0:f.readyState)===WebSocket.CLOSED&&(c("WebSocket disconnected. Attempting to reconnect..."),P())},z=()=>new Promise((f,p)=>{if(e.current&&e.current.readyState===WebSocket.OPEN){let l=null,E=null;const b=O=>{var R;const a=O.data;typeof a=="string"&&(a.startsWith("CONFIG:")?(l=JSON.parse(a.replace("CONFIG:","")),c(`Received CONFIG: ${JSON.stringify(l,null,2)}`)):a.startsWith("LAST_SELECTED_PROFILE:")&&(E=a.replace("LAST_SELECTED_PROFILE:","").trim(),c(`Received LAST_SELECTED_PROFILE: ${E}`)),l!==null&&E!==null&&((R=e.current)==null||R.removeEventListener("message",b),r.current=l,i(l),C(E),f([l,E])))};e.current.addEventListener("message",b),e.current.send("LOAD_CONFIG"),c("Sent LOAD_CONFIG message"),e.current.send("GET_LAST_SELECTED_PROFILE"),c("Sent GET_LAST_SELECTED_PROFILE message"),setTimeout(()=>{var O;(O=e.current)==null||O.removeEventListener("message",b),c("Timeout while fetching config and profile"),c(`Config received: ${l!==null}`),c(`Last profile received: ${E!==null}`),p(new Error("Timeout while fetching config and profile"))},5e3)}else p(new Error("WebSocket is not connected"))}),G=f=>{const p={lalt:"alt",ralt:"alt",lcontrol:"ctrl",rcontrol:"ctrl",controlleft:"ctrl",controlright:"ctrl",shiftleft:"shift",shiftright:"shift",metaleft:navigator.platform.toUpperCase().indexOf("MAC")>=0?"cmd":"win",metaright:navigator.platform.toUpperCase().indexOf("MAC")>=0?"cmd":"win",numpad1:"1",numpad2:"2",numpad3:"3",numpad4:"4",numpad5:"5",numpad6:"6",numpad7:"7",numpad8:"8",numpad9:"9",numpad0:"0"},E=navigator.platform.toUpperCase().indexOf("MAC")>=0?["cmd","ctrl","alt","shift"]:["ctrl","alt","shift","win"];return f.toLowerCase().split("+").map(a=>p[a]||a).filter((a,R,A)=>A.indexOf(a)===R).sort((a,R)=>{const A=E.indexOf(a),j=E.indexOf(R);return A===-1&&j===-1?a.localeCompare(R):A===-1?1:j===-1?-1:A-j}).map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join("+")},M=async f=>{c(`Handling combo: ${f}`);let p,l;try{[p,l]=await z(),c(`Fetched latest config: ${JSON.stringify(p,null,2)}`),c(`Current profile: ${l}`)}catch(a){c(`Error fetching latest config: ${a}. Using current state.`),p=r.current,l=h,c(`Using config: ${JSON.stringify(p,null,2)}`),c(`Using profile: ${l}`)}if(!l){c("No profile selected, skipping combo execution");return}if(!p.profiles||!p.profiles[l]){c(`Selected profile ${l} not found in config, skipping combo execution`);return}const E=p.profiles[l];if(Object.keys(E).length===0){c(`Config for profile ${l} is empty, no bindings to process`);return}const b=G(f);c(`Normalized combo: ${b}`);const O=Object.fromEntries(Object.entries(E).map(([a,R])=>[G(a),R]));if(c(`Normalized config for profile ${l}: ${JSON.stringify(O,null,2)}`),O[b]){const a=O[b];c(`Found binding for combo: ${b}`),a.path?(c(`Executing script for path: ${a.path}, track: ${a.track}, volume: ${a.volume}dB, and pitch: ${a.pitch} semitones`),x(a.path,parseInt(a.track.replace("A",""),10),a.volume,a.pitch||0)):c(`No path specified for combo: ${b}`)}else c(`Combo ${b} not found in config for profile ${l}. Skipping execution.`)},x=(f,p,l,E)=>{c(`Executing script with parameters: filePath=${f}, track=${p}, volume=${l}, pitch=${E}`);const b="./jsx/importAudio.jsx",O=he.resolve(__dirname,b),a=process.platform==="win32"?O.replace(/\\/g,"\\\\"):O,R=process.platform==="win32"?f.replace(/\\/g,"\\\\"):f,A=`
            try {
                var jsxFile = new File("${a}");
                if (jsxFile.exists) {
                    $.evalFile(jsxFile);
                    var result = importAudioToTrack("${R}", ${p}, ${l}, ${E}, true);
                    result; // Return the result from the function
                } else {
                    throw new Error("JSX file not found at: " + jsxFile.fsName);
                }
            } catch(e) {
                // Return the error as a JSON string
                JSON.stringify({
                    success: false,
                    message: e.toString(),
                    debugLog: "Error occurred while executing JSX script."
                });
            }
        `;c(`Evaluating script:
${A}`),window.__adobe_cep__&&window.__adobe_cep__.evalScript?window.__adobe_cep__.evalScript(A,j=>{c(`Script execution result: ${j}`);try{const k=JSON.parse(j);k.success?c(`JSX script executed successfully: ${k.message}`):c(`Error in JSX script: ${k.message}`),c(`Debug Log:
${k.debugLog}`)}catch(k){c(`Failed to parse result from JSX script: ${k}`),c(`Raw result: ${j}`)}}):c("window.__adobe_cep__.evalScript is not available")},I=f=>{window.electron&&window.electron.ipcRenderer&&window.electron.ipcRenderer.send("background-log",f)};return null};L.client.createRoot(document.getElementById("root")).render(L.jsx(L.React.StrictMode,{children:L.jsx(be,{})}));const{spawn:ve}=require("child_process"),H=require("path"),ye=require("fs");let F=null;function Se(){if(console.log("Starting Rust server..."),typeof process<"u"&&process.versions!=null&&process.versions.node!=null){console.log("Node.js environment detected. Node version:",process.version);const e=we();console.log("Extension root path:",e);let r;if(process.platform==="win32")r=decodeURIComponent(e.replace(/^file:[/\\]*/,""));else if(process.platform==="darwin")r="/"+decodeURIComponent(e.replace(/^file:\/\//,""));else{console.error(`Unsupported platform: ${process.platform}`);return}console.log("Decoded Extension Root Path:",r);let n;if(process.platform==="win32")n=H.join(r,"target","release","audio_importer.exe");else if(process.platform==="darwin")n=H.join(r,"target","release","audio_importer");else{console.error(`Unsupported platform: ${process.platform}`);return}if(n=H.normalize(n),console.log("Corrected Rust executable path:",n),!ye.existsSync(n)){console.error(`Rust executable not found at ${n}`);return}F=ve(n,[],{cwd:H.dirname(n),env:{...process.env,RUST_BACKTRACE:"1"},stdio:["inherit","pipe","pipe"],detached:!1}),F.stdout.on("data",i=>{console.log(`Rust server stdout: ${i}`)}),F.stderr.on("data",i=>{console.error(`Rust server stderr: ${i}`)}),F.on("error",i=>{console.error(`Failed to start Rust server: ${i}`)}),F.on("close",i=>{i!==0?console.error(`Rust server process exited with code ${i}`):console.log("Rust server process exited successfully"),F=null})}else console.error("This script should only be run in a Node.js environment.")}function J(){F&&(console.log("Stopping Rust server..."),F.kill())}function we(){return typeof window<"u"&&window.__adobe_cep__?window.__adobe_cep__.getSystemPath("extension"):process.cwd()}console.log("Background script loaded. Starting Rust server...");Se();process.on("exit",J);process.on("SIGINT",J);process.on("SIGTERM",J);process.platform==="win32"&&process.on("SIGBREAK",J);typeof window<"u"&&window.__adobe_cep__&&window.__adobe_cep__.addEventListener("com.adobe.csxs.events.ApplicationBeforeQuit",J);
//# sourceMappingURL=settings-b8b9cbdb.js.map
